install:
  cmd: python -m spacy run install
  script:
    - python3 -m pip install --upgrade pip
    - python3 -m pip install -r requirements.txt
    - dotenv run -- python3 -m pip install prodigy --pre -f https://1846-6A38-C189-0430@download.prodi.gy
  deps: []
  outs: []
  spacy_version: 3.5.2
  spacy_git_version: aea4a96f9
ner-data-to-spacy:
  cmd: python -m spacy run ner-data-to-spacy
  script:
    - python3 -m prodigy data-to-spacy ./corpus --ner address_train,eval:address_eval
  deps: []
  outs:
    - path: corpus/train.spacy
      md5: b0564dd45a9826c097173b39a00d1a6e
    - path: corpus/dev.spacy
      md5: c44fe48fe12f769bce238fe41278808e
    - path: corpus/config.cfg
      md5: f746b68d7ba264c16558c4df30f88879
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
evaluate:
  cmd: python -m spacy run evaluate
  script:
    - python3 -m spacy evaluate  training/model-last  corpus/dev.spacy  --output training/model-last.json
    - python3 -m spacy evaluate  training/model-best  corpus/dev.spacy  --output training/model-best.json
  deps:
    - path: corpus/dev.spacy
      md5: c44fe48fe12f769bce238fe41278808e
    - path: training/model-last
      md5: 454ecf7a1e6638470b2278f9ea07a531
    - path: training/model-best
      md5: fd763259da0f71585f549043b86866c1
  outs:
    - path: training/model-last.json
      md5: 35f505888f5f43d340c50cf558aeacef
    - path: training/model-best.json
      md5: 553cf880d823b74e33a8fc2b3db39b89
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
data-merge:
  cmd: python -m spacy run data-merge
  script:
    - python3 -m prodigy drop address_train
    - python3 -m prodigy db-merge address_manual,address_correct address_train
  deps: []
  outs: []
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
ner-data-debug:
  cmd: python -m spacy run ner-data-debug
  script:
    - python3 -m spacy debug data corpus/config.cfg --paths.train corpus/train.spacy
      --paths.dev corpus/dev.spacy
  deps: []
  outs: []
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
train:
  cmd: python -m spacy run train
  script:
    - python3 -m spacy train corpus/config.cfg --paths.train corpus/train.spacy --paths.dev
      corpus/dev.spacy --output training/ --gpu-id -1
  deps:
    - path: corpus/config.cfg
      md5: f746b68d7ba264c16558c4df30f88879
    - path: corpus/train.spacy
      md5: 892b26ef567461d24d4eecc3d647af6e
    - path: corpus/dev.spacy
      md5: 973ff8970b4f9f1ed5021dbfbe11c90b
  outs:
    - path: training/model-best
      md5: 34872a3a415a051d71015519e821e2ca
  spacy_version: 3.5.2
  spacy_git_version: aea4a96f9
generate-data:
  cmd: python -m spacy run generate-data
  script:
    - dotenv run -- python3 -m prodigy terms.openai.fetch "Generate news article text
      embedded with US addresses and locations." ./assets/addresses.jsonl --n 65
  deps: []
  outs: []
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
train-vectors:
  cmd: python -m spacy run train-vectors
  script:
    - python3 -m spacy train corpus/config.cfg  --paths.train corpus/train.spacy  --paths.dev
      corpus/dev.spacy  --output training/  --gpu-id -1  --paths.vectors en_core_web_lg
      --components.tok2vec.model.embed.include_static_vectors True
  deps:
    - path: corpus/config.cfg
      md5: f746b68d7ba264c16558c4df30f88879
    - path: corpus/train.spacy
      md5: b0564dd45a9826c097173b39a00d1a6e
    - path: corpus/dev.spacy
      md5: c44fe48fe12f769bce238fe41278808e
  outs:
    - path: training/model-best
      md5: fd763259da0f71585f549043b86866c1
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
package:
  cmd: python -m spacy run package
  script:
    - python -m spacy package training/model-last packages --name address_extraction
      --version 0.2.0 --force
  deps:
    - path: training/model-last
      md5: 454ecf7a1e6638470b2278f9ea07a531
  outs:
    - path: packages/en_address_extraction-0.2.0/dist/en_address_extraction-0.2.0.tar.gz
      md5: 69b35d91d118de9d4a56fefb3d0097c0
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
document:
  cmd: python -m spacy run document
  script:
    - spacy project document --output README.md
  deps: []
  outs: []
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
ner-train-curve:
  cmd: python -m spacy run ner-train-curve
  script:
    - python3 -m prodigy train-curve --ner address_train,eval:address_eval
  deps: []
  outs: []
  spacy_version: 3.5.3
  spacy_git_version: '512241e12'
